<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_tower_basic_upgrade</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-11</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>inst_id = instance_place(x, y, tower_slower_upgrade);

inst_tower = instance_place(x-52, y, tower_slower);

//show_message("Tower basic ID: " + string(inst_tower));

inst_circle = instance_place(x-52, y, tower_slower_circle);

//show_message("Tower basic circle ID " + string(inst_circle));

draw_level = false;

image_speed = 0;


if (inst_tower.level == 1 &amp;&amp; global.money &gt;= 40){
    has_money = true;
}else if (inst_tower.level == 2 &amp;&amp; global.money &gt;=50){
    has_money = true;
}else if (inst_tower.level == 1 &amp;&amp; global.money &lt; 40){
    has_money = false;
}else if (inst_tower.level == 2 &amp;&amp; global.money &lt; 50){
    has_money = false;
} else if (inst_tower.level == 3){
    has_money = false;
}

if (has_money){
    image_index = 0;
}else {
    image_index = 1;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//destroy instance if circle disappears
if (!instance_exists(inst_circle)){
    instance_destroy();
}

if (instance_exists(inst_tower)){

if (inst_tower.level == 1 &amp;&amp; global.money &gt;= 50){
    has_money = true;
}else if (inst_tower.level == 2 &amp;&amp; global.money &gt;=80){
    has_money = true;
}else if (inst_tower.level == 1 &amp;&amp; global.money &lt; 50){
    has_money = false;
}else if (inst_tower.level == 2 &amp;&amp; global.money &lt; 80){
    has_money = false;
} else if (inst_tower.level == 3){
    has_money = false;
}

if (has_money){
    image_index = 0;
}else {
    image_index = 1;
}

//Check if mouse is inside the sprite


if (point_distance(x, y, mouse_x, mouse_y)&lt;17){
        //current level
    
    draw_level = true;
    if (has_money){
        //DO UPGRADE
        if (inst_tower.level&lt;3){ //level cap
            if (mouse_check_button_released(mb_left)){
                if (inst_tower.level == 1){
                    global.money -= 40;
                }else if (inst_tower.level == 2){
                    global.money -= 50;
                }
                inst_tower.level+=1; //increase level
                
            }
        }
    }
} else {
        draw_level = false;
}

}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_self();
draw_set_font(f_basic);
draw_set_color(c_white);

draw_text(x-35, y-48, "UPGRADE");

if (draw_level){
    if (inst_tower.level == 3) {
        draw_text(x-30, y+15, "Level: " + string(inst_tower.level) + "#(MAX)");
    }else {
        draw_text(x-30, y+15, "Level: " + string(inst_tower.level));
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
